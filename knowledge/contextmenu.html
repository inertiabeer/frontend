<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>自定义鼠标右键菜单</title>
	<style>
	.flex
	{
		display: flex;
		width: 100%;
		height: 1500px;
		background-color: #bbf7dc;
		justify-content: space-between;
	}
	.menu
	{
	
		background-color: #fe3443;
		
	}
	#menu
	{
		position: absolute;
	}
	</style>
</head>
<body>
<div class="flex">
<div class="menu">这里是一个菜单</div>
<div class="menu">这里是一个菜单</div>
<div class="menu">这里是一个菜单</div>
</div>
 <div id='menu' style="display: none;">
 	<ul>
 		<li><a href="#"></a>menu1</li>
 		<li><a href="#"></a>menu2</li>
 		<li><a href="#"></a>menu3</li>
 	</ul>
 </div>
 <script>
 	$=function(el)
 	{
 		return document.querySelectorAll(el);
 	}
 	var menu=$("#menu")[0];
 	for(let i=0;i<$('.menu').length;i++)
 	{
 		$('.menu')[i].addEventListener("mousedown",function(e)
 		{
 			if(window.event)
 				e=window.event;
 			if(e.button==2)
 			{
 				document.oncontextmenu=function(e)
 				{
 					e.preventDefault();
 					if(e=window.event)
 					{
 						window.event.returnValue=false;
 					}

 				}
 				menu.style.cssText='display:block;';
 				var menuWidth=menu.offsetWidth;
 				var menuHeight=menu.offsetHeight;
 				var clientWidth=document.documentElement.clientWidth;
 				var clientHeight=document.documentElement.clientHeight;
 				if(clientHeight-e.pageY>=menuHeight)
 				{
 					menu.style.top=e.pageY+"px";
 				}
 				else
 				{
 					//menu.style.bottom=e.pageY+"px";
 					menu.style.top=(e.pageY-menuHeight)+"px";
 				};
 				if(clientWidth-e.pageX>=menuWidth)
 				{
 					menu.style.left=e.pageX+'px';
 				}
 				else
 				{
 					menu.style.left=(e.pageX-menuWidth)+"px";
 				}
 			}
 		})
 	
 	// document.body.addEventListener('click',function(e)
 	// {
 	// 	menu.style.cssText='display:none;';
 	// 	document.oncontextmenu=function(e){}
 	// })
}
 </script>
</body>
</html>